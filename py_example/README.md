# PathMiner: usage

Example of PathMiner's output usage written in [PyTorch](https://pytorch.org/).

## Getting started

To train a toy model on your local machine follow the instructions.

### Setup python environment

Conda users:

~~~~
conda env create -f conda_environment.yml
~~~~

Pip users:
~~~~
python3 -m virtualenv env
source env/bin/activate
pip3 install -r requirements.txt
~~~~



### Load data

Data will be loaded as one of the steps of `run_example.py` script. 
However, to use custom projects you can put them in `data/` folder
as `project1` and `project2`.

### Run the example

To run the example execute `run_example.py` script. 
Data loading and processing take several minutes.


## Useful modules

### Data processing

In `data_processing` package you can find several classes that are capable of loading
PathMiner's generated output into easy-to-integrate format.

* `data_processing.PathMinerLoader` loads all data generated by PathMiner in `pandas.Dataframe` and `pandas.Series`.
It doesn't depend on ML frameworks and can be used with whichever framework you like. 
* `data_processing.UtilityEntities` contains wrappers around AST paths, nodes and contexts. For now they are only 
capable of storing data and pretty printing but functionality can be extended.
* `data_processing.PathMinerDataset` is an extension of `pytorch.Dataset`. It feeds data from `PathMinerLoader` to
PyTorch models. To use PathMiner's output with other ML frameworks you can write similar class that transforms contents
of `PathMinerLoader` to i.e. Tensorflow tensors or ndarrays. 

### Model

`model.Code2Vec` contains a model to vectorize snippets of code based on their path-context representation.
This model had been originally implemented as a part of [code2vec](https://github.com/tech-srl/code2vec).
It is implemented as a PyTorch module and can be easily reused.

A usage example can be found in `model.ProjectClassifier`.
It is a linear classifier that decides from which project does file come from based on file's vectorization.
